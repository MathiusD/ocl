<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>OCL</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="reveal.js/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="reveal.js/css/theme/stereopticon.css" id="theme"><!--This CSS is generated by the Asciidoctor-Reveal.js converter to further integrate AsciiDoc's existing semantic with Reveal.js--><style type="text/css">.reveal div.right {
  float: right;
}

/* callouts */
.conum[data-value] {display:inline-block;color:#fff!important;background-color:rgba(50,150,50,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}</style><link href="reveal.js/lib/css/zenburn.css" rel="stylesheet"><script>var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? "reveal.js/css/print/pdf.css" : "reveal.js/css/print/paper.css";
document.getElementsByTagName( 'head' )[0].appendChild( link );</script><!--[if lt IE 9]><script src="reveal.js/lib/js/html5shiv.js"></script><![endif]--></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>OCL</h1><div class="preamble"><div class="paragraph"><p>The Object Constraint Language</p></div>
<div class="paragraph"><p>Gerson Sunyé</p></div>
<div class="paragraph"><p><a href="mailto:gerson.sunye@univ-nantes.fr">gerson.sunye@univ-nantes.fr</a></p></div></div></section>
<section id="_license"><h2>License</h2><div class="paragraph"><p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.</p></div>
<div class="paragraph"><p><a href="http://creativecommons.org/licenses/by-nc/4.0/"><span class="image"><img src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" alt="Creative Commons License"></span></a></p></div></section>
<section id="_plan"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p><strong>Introduction</strong></p></li><li><p>Invariants</p></li><li><p>Model Navigation</p></li><li><p>Property Definition</p></li><li><p>Operation Specification</p></li><li><p>Advanced Topics</p></li><li><p>Conclusion</p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_introduction" class="impact"><h2>Introduction</h2></section>
<section id="_what_is_ocl"><h2>What is OCL?</h2><div class="paragraph"><p>OCL stands for «Object Constraint Language».</p></div>
<div class="ulist"><div class="title">OCL is:</div><ul><li><p>a OMG standard (see <a href="http://www.omg.org/spec/OCL/" class="bare">http://www.omg.org/spec/OCL/</a>).</p></li><li><p>a formal and unambiguous language, but easy to use (even for non mathematicians).</p></li><li><p>a complement to UML (and also to MOF, but that is another history).</p></li></ul></div></section>
<section id="_why_do_i_need_ocl"><h2>Why do I need OCL?</h2><div class="paragraph"><p>Sometimes, the UML lacks precision. Suppose the following class diagram:</p></div>
<div class="imageblock" style="text-align: center"><img src="resources/png/family.png" alt="family" width="400px"></div>
<div class="ulist"><ul><li><p>How do you specify that this class only considers people born after 1900?</p></li><li><p>And how do you specify that cycles are not allowed (i.e., that a person cannot be an ancestor of himself)?</p></li></ul></div></section>
<section id="_what_about_comments"><h2>What About Comments?</h2><div class="openblock columns"><div class="content"><div class="sidebarblock col-6"><div class="content"><div class="imageblock" style="text-align: center"><img src="resources/png/marriage.png" alt="marriage" width="600px"></div>
<div class="imageblock" style="text-align: center"><img src="resources/png/anna-bob-carol.png" alt="anna bob carol" width="600px"></div></div></div>
<div class="ulist col-6"><ul><li><p>Comments, expressed in natural languages, are often very useful.</p></li><li><p>But sometimes, they are also ambiguous.</p></li><li><p>Still, comments cannot avoid some situations.</p></li></ul></div></div></div></section>
<section id="_how_can_ocl_add_more_precision_to_uml"><h2>How can OCL add more precision to UML?</h2><div class="ulist"><ul><li><p>By adding <em>constraints</em> to modeling elements:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person
inv: self.wife-&gt;notEmpty() implies self.wife.husband = self and
    self.husband-&gt;notEmpty() implies self.husband.wife = self</code></pre>
<div class="imageblock" style="text-align: center"><img src="resources/png/marriage.png" alt="marriage" width="800px"></div></section>
<section id="_plan_2"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p><strong>Invariants</strong></p></li><li><p>Model Navigation</p></li><li><p>Property Definition</p></li><li><p>Operation Specification</p></li><li><p>Advanced Topics</p></li><li><p>Conclusion</p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_invariants" class="impact"><h2>Invariants</h2></section>
<section id="_class_invariants"><h2>Class Invariants</h2><div class="ulist"><ul><li><p>A class invariant is a constraint that must be verified by all instances of a class, when in a <strong>stable state</strong>.</p></li><li><p>The notion of stable state is important: an invariant may be broken during the execution of an operation.</p></li><li><p>It is commonly accepted that an instance is in a stable state between the execution of two public operations.</p></li></ul></div></section>
<section id="_invariants_graphical_notation"><h2>Invariants: Graphical Notation</h2><div class="ulist"><ul><li><p>Invariants can be placed directly on the modeling element, between braces ({}) or on a comment attached to it:</p></li></ul></div>
<div class="imageblock" style="text-align: center"><img src="resources/png/person-inv.png" alt="person inv" width="400px"></div>
<div class="imageblock" style="text-align: center"><img src="resources/png/person-inv-note.png" alt="person inv note" width="800px"></div></section>
<section id="_invariants_textual_notation"><h2>Invariants: Textual Notation</h2><div class="paragraph"><p>Invariants may also be placed on a separate document. In this case, the notion of <strong>context</strong> is important.</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person inv: self.age &lt; 150

context Person inv: age &lt; 150</code></pre></section>
<section id="_context"><h2>«Context»</h2><div class="ulist"><ul><li><p>Every OCL expression is attached to a specific <strong>context</strong>: a UML modeling element.</p></li><li><p>The context may be referenced inside the expression using the <code>self</code> keyword.</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person inv: self.age &lt; 150
context Person inv: self.age &gt; 0</code></pre>
<div class="imageblock" style="text-align: center"><img src="resources/png/person-inv.png" alt="person inv" width="600px"></div></section>
<section id="_context_properties"><h2>Context Properties</h2><div class="ulist"><ul><li><p>The context allows the access to some properties from the attached modeling element.</p></li><li><p>In the case of a UML class, this means: attributes, query operations, and states (from attached state machines).</p></li></ul></div>
<div class="imageblock" style="text-align: center"><img src="resources/png/person.png" alt="person" width="600px"></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person
inv:
  self.name.size() &gt; 1 and
  self.age() &gt;= 0 and
  self.oclInState(Single)</code></pre>
<aside class="notes"><div class="paragraph"><p>While it is possible to check a state within an invariant, this is not logical.</p></div></aside></section>
<section id="_plan_3"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p>Invariants</p></li><li><p><strong>Model Navigation</strong></p></li><li><p>Property Definition</p></li><li><p>Operation Specification</p></li><li><p>Advanced Topics</p></li><li><p>Conclusion</p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_model_navigation" class="impact"><h2>Model Navigation</h2></section>
<section id="_ocl_uml_basic_principles"><h2>OCL &amp; UML: Basic Principles</h2><div class="openblock columns"><div class="content"><div class="ulist col-6"><ul><li><p>OCL expressions have no side effect, they cannot modify the model.</p></li><li><p>A OCL expression refers to the following constituents:</p><div class="ulist"><ul><li><p>Values of basic types: <code>Integer</code>, <code>Real</code>, <code>Boolean</code>, <code>String</code>, <code>UnlimitedNatural</code>;</p></li><li><p>Modeling elements, from the associated UML model;</p></li><li><p>Collections of values or modeling elements.</p></li></ul></div></li></ul></div>
<div class="imageblock col-6" style="text-align: center"><img src="resources/svg/university.svg" alt="university" width="800px"></div></div></div></section>
<section id="_operation_call_syntax"><h2>Operation Call Syntax</h2><div class="ulist"><ul><li><p>Operation calls on elements and values use <strong>dots</strong>:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">"Nantes".substring(1,3) = "Nan"</code></pre>
<div class="ulist"><ul><li><p>Operation calls on collections use <strong>arrows</strong>:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">{1, 2, 3, 4, 5}-&gt;size() = 5</code></pre></section>
<section id="_role_navigation"><h2>Role Navigation</h2><div class="paragraph"><p>An OCL expression can navigate through model associations using the opposite role (association end):</p></div>
<div class="imageblock" style="text-align: center"><img src="resources/svg/univ-department.svg" alt="univ department" width="800px"></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department
    -- A department’s university should not be null.
    inv: not self.university.oclIsUndefined()

context University
    -- A university must have at least one department
    inv: self.department-&gt;notEmpty()</code></pre>
<aside class="notes"><div class="paragraph"><p>Navigation through private roles is possible. It seems that it is also possible to navigate through non-navigable roles.</p></div></aside></section>
<section id="_multiplicities"><h2>Multiplicities</h2><div class="openblock columns"><div class="content"><div class="paragraph col-4"><p><span class="image"><img src="resources/svg/course.svg" alt="course" width="600px"></span></p></div>
<div class="sidebarblock col-8"><div class="content"><div class="ulist"><div class="title">The type of an expression (its return type) depends on the role’s maximum multiplicity:</div><ul><li><p>If equals to 1, it’s a simple element.</p></li><li><p>If &gt; 1, it’s a collection.</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Course
  -- an objet:
  inv: self.instructor.oclInState(Available)

  -- a collection (Set):
  inv: self.is_mastered_by-&gt;notEmpty()</code></pre></div></div></div></div></section>
<section id="_navigation_special_cases"><h2>Navigation: Special Cases</h2><div class="openblock columns"><div class="content"><div class="sidebarblock col-4"><div class="content"><div class="imageblock" style="text-align: 400px"><img src="resources/svg/department-professor.svg" alt="department professor"></div>
<div class="imageblock" style="text-align: 400px"><img src="resources/svg/wife.svg" alt="wife"></div></div></div>
<div class="sidebarblock col-8"><div class="content"><div class="ulist"><ul><li><p>When there is no role name, the OCL uses the class name (in lower cases).</p></li><li><p>Monovalued (max multiplicity = 1) roles may be navigated as a collection.</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department inv: self.chef-&gt;size() = 1

context Department inv: self.chef.age &gt; 40

context Person inv: self.wife-&gt;notEmpty()
    implies self.wife.gender = Gender::female</code></pre></div></div></div></div></section>
<section id="_navigation_through_association_classes"><h2>Navigation through Association-Classes</h2><div class="ulist"><ul><li><p>To navigate towards an association-class, OCL uses the association-class’ name, in lower cases.</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Student
inv:
    -- A student average grade is always greater than 4:
    self.grade.value-&gt;average() &gt; 4</code></pre>
<div class="imageblock" style="text-align: center"><img src="resources/svg/grade.svg" alt="grade" width="800px"></div></section>
<section id="_navigation_through_association_classes_2"><h2>Navigation through Association-Classes</h2><div class="ulist"><ul><li><p>To navigate from class-association, OCL uses role names:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Grade inv:
    self.students.age() &gt;= 18
    self.follows.hours &gt; 3</code></pre>
<div class="imageblock" style="text-align: center"><img src="resources/svg/grade.svg" alt="grade" width="800px"></div></section>
<section id="_qualified_associations"><h2>Qualified Associations</h2><div class="ulist"><ul><li><p>To navigate through a qualified association, OCL uses the qualifier name between square brackets:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University
    -- The name of student 8764423 must be "Martin".
    inv: self.students[8764423].name = "Martin"</code></pre>
<div class="ulist"><ul><li><p>When the qualifier is not specified, the result is a collection:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University
    -- There is at least one student named "Martin":
    inv: self.students-&gt;exists(each | each.name = "Martin")</code></pre>
<div class="paragraph"><p><span class="image"><img src="resources/svg/qualified-association.svg" alt="qualified association" width="800px"></span></p></div></section>
<section id="_plan_4"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p>Invariants</p></li><li><p>Model Navigation</p></li><li><p><strong>Property Definition</strong></p></li><li><p>Operation Specification</p></li><li><p>Advanced Topics</p></li><li><p>Conclusion</p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_property_definition_initialization_and_calculation" class="impact"><h2>Property Definition, Initialization, and Calculation</h2></section>
<section id="_property_definition"><h2>Property Definition</h2><div class="ulist"><ul><li><p>OCL allows the definition of new attributes and new operations, and add them to an existing class.</p></li><li><p>These new properties can be used within other OCL constraints.</p></li></ul></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context &lt;class-name&gt;
  def: &lt;attr-name&gt; : &lt;type&gt; = &lt;ocl-expression&gt;
  def: &lt;op-name&gt; (&lt;argument-list) : type = &lt;ocl-expression&gt;</code></pre></section>
<section id="_property_definition_2"><h2>Property Definition</h2><div class="ulist"><ul><li><p>Useful to decompose complex expressions without overloading the model.</p></li><li><p>Examples:</p></li></ul></div>
<div class="openblock columns"><div class="content"><pre class="highlight listingblock col-8"><code data-noescape class="ocl language-ocl">context Professor
def: students() : Bag(Student) =
    self.teaches.students

context Department
def: students() : Set(Student) =
    self.instructors.teaches.student-&gt;asSet()</code></pre>
<div class="imageblock col-6" style="text-align: center"><img src="resources/svg/university.svg" alt="university" width="600px"></div></div></div></section>
<section id="_property_initialization"><h2>Property Initialization</h2><div class="ulist"><ul><li><p>Initial value specification for attributes and roles.</p></li><li><p>The expression type must conform to the attribute or role type.</p></li></ul></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context &lt;class-name&gt;::&lt;prop-name&gt;: &lt;type&gt;
    init: &lt;ocl-expression&gt;</code></pre>
<div class="paragraph"><p>Example:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Professor::wage : Integer
    init: 800</code></pre></section>
<section id="_derived_property_specification"><h2>Derived Property Specification</h2><div class="openblock columns"><div class="content"><div class="imageblock col-4" style="text-align: center"><img src="resources/svg/course.svg" alt="course" width="600px"></div>
<div class="sidebarblock col-8"><div class="content"><div class="ulist"><ul><li><p>OCL expression defining how a derived property is calculated.</p></li></ul></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context &lt;class-name&gt;::&lt;role-name&gt;: &lt;type&gt;
    derive:  &lt;ocl-expression&gt;</code></pre>
<div class="paragraph"><p>Examples:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Professor::service : Integer
    derive: self.teaches.hours-&gt;sum()

context Person::single : Boolean
    derive: self.partner-&gt;isEmpty()</code></pre>
<hr></div></div></div></div></section>
<section id="_query_operation_specification"><h2>Query Operation Specification</h2><div class="ulist"><ul><li><p>Specification of query operation body.</p></li></ul></div>
<div class="paragraph"><p>Example:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University::instructors() : Set(Professor)
body:
    self.departments.instructors-&gt;asSet()</code></pre></section>
<section id="_plan_5"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p>Invariants</p></li><li><p>Model Navigation</p></li><li><p>Property Definition</p></li><li><p><strong>Operation Specification</strong></p></li><li><p>Advanced Topics</p></li><li><p>Conclusion</p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_operation_specification" class="impact"><h2>Operation Specification</h2></section>
<section id="_operation_specification_2"><h2>Operation Specification</h2><div class="ulist"><div class="title">OCL can be used to specify class operations:</div><ul><li><p>Approach inspired from Abstract Types.</p></li><li><p>An operation is defined by:</p><div class="ulist"><ul><li><p>A signature;</p></li><li><p>A precondition; and</p></li><li><p>A postcondition.</p></li></ul></div></li><li><p>The precondition constraints the operation input set.</p></li><li><p>The postcondition specifies the operation semantics.</p></li></ul></div></section>
<section id="_operation_precondition"><h2>Operation Precondition</h2><div class="ulist"><ul><li><p>A precondition is a constraint that must be verified <strong>before</strong> the execution of the operation.</p></li><li><p>Specifies what clients must respect to call the operation.</p></li><li><p>Represented by an OCL expression, preceded by <code>pre:</code></p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">-- Only professors older than 30 years can be added to the department:
context Department::add(p : Professor) : Integer
    pre old: p.age &gt; 30</code></pre></section>
<section id="_postconditions"><h2>Postconditions</h2><div class="ulist"><ul><li><p>A postcondition is a constraint that must be verified <strong>after</strong> the execution of the operation.</p></li><li><p>Specifies what the operation must accomplish.</p></li><li><p>Represented by an OCL expression preceded by the keyword <code>post:</code></p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Student::age() : Integer
post correct: result = (today - birthday).years()</code></pre>
<div class="ulist"><ul><li><p>The <code>result</code> operator gives access to the operation return value.</p></li></ul></div></section>
<section id="_property_values"><h2>Property Values</h2><div class="ulist"><ul><li><p>Within a postcondition, there are <strong>two</strong> available values for each property:</p><div class="ulist"><ul><li><p>Its value <strong>before</strong> the operation execution.</p></li><li><p>Its value <strong>after</strong> the operation execution.</p></li></ul></div></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person::birthday()
    post: age = age@pre + 1

context Professor::raise(v : Integer)
    post: self.wage = self.wage@pre + v</code></pre>
<div class="ulist"><ul><li><p>The <code>@pre</code> operator gives access to a property’s value <strong>before</strong> the operation execution.</p></li></ul></div></section>
<section id="_previous_values_12"><h2>Previous Values (1/2)</h2><div class="paragraph"><p>When the <code>@pre</code> value of a property is an object, all the values reached from this objects are new:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">a.b@pre.c
        -- the old value of b, say X,
        -- and the new value of c of X

a.b@pre.c@pre
        -- the old value of b , say X,
        -- and the old value of c of X.</code></pre></section>
<section id="_previous_values_22"><h2>Previous Values (2/2)</h2><div class="imageblock" style="text-align: center"><img src="resources/svg/atpre.svg" alt="atpre" width="800px"></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">a.b@pre.c -- the new value of b1.c,
c3 a.b@pre.c@pre  -- the old value of b1.c,
c1 a.b.c -- the new value of b2.c, c2+`</code></pre></section>
<section id="_plan_6"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p>Invariants</p></li><li><p>Model Navigation</p></li><li><p>Property Definition</p></li><li><p>Operation Specification</p></li><li><p><strong>Advanced Topics</strong></p></li><li><p>Conclusion</p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_advanced_topics" class="impact"><h2>Advanced Topics</h2><div class="paragraph"><p>Tuples, Messages, Constraint Inheritance</p></div></section>
<section id="_tuples"><h2>Tuples</h2><div class="paragraph"><p>Definition</p></div>
<div class="paragraph"><p><strong>Tuple:</strong></p></div>
<div class="quoteblock"><blockquote><div class="paragraph"><p>A Tuple is a finite sequence of objects or components, where each component is named. The component types are potentially different.</p></div></blockquote></div>
<div class="paragraph"><p><strong>Examples:</strong></p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Tuple {name:String = 'Martin', age:Integer = 42}
Tuple {name:'Colette', grades:Collection(Integer) = Set{12, 13, 9},
     diploma:String = 'Computer Science'}</code></pre></section>
<section id="_tuple_syntax"><h2>Tuple Syntax</h2><div class="ulist"><ul><li><p>Types are optionals.</p></li><li><p>The component order is not relevant.</p></li></ul></div>
<div class="paragraph"><p><strong>Equivalent expressions:</strong></p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Tuple {name: String = 'Martin,' age: Integer = 42}
Tuple {name = 'Martin,' age = 42}
Tuple {age = 42, name = 'Martin'}</code></pre></section>
<section id="_tuple_component_initialization"><h2>Tuple Component Initialization</h2><div class="ulist"><ul><li><p>OCL expressions can be used to initialize tuple components:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University def:
statistics : Set(Tuple(dpt : Department, studentNb:Integer,
                               graduated: Set(Student), average: Integer)) =
     department-&gt;collect(each |
       Tuple {dpt : Department = each,
           studentNb: Integer = each.students()-&gt;size(),
           graduated: Set(Student) = each.students()-&gt;select(graduated()),
           average: Integer = each.students()-&gt;collect(note)-&gt;avg()
          }
      )</code></pre></section>
<section id="_tuple_component_access"><h2>Tuple Component Access</h2><div class="ulist"><ul><li><p>Component values are accessible through their names, using the dotted notation:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Tuple {name:String='Martin', age:Integer = 42}.age = 42</code></pre>
<div class="ulist"><ul><li><p>The attribute <code>statistics</code> defined previously can be used within another OCL expression:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University inv:
     statistics-&gt;sortedBy(average)-&gt;last().dpt.name = 'Computer Science'
     -- CS department has always the best students.</code></pre></section>
<section id="_messages"><h2>Messages</h2><div class="paragraph"><p>OCL expressions can verify that a communication happened, using the «<code>^</code>» (hasSent) operator:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Subject::hasChanged()
post:  observer^update(12, 14)</code></pre>
<aside class="notes"><div class="paragraph"><p>The expression <code>observer^update(12, 14)</code> evaluates to true if the message <code>update</code>, with the arguments 12 and 14 was sent to the object <code>observer</code>. The statement <code>update()</code> is either an operation from observer’s class, or a Signal. Obviously, the arguments 12 and 14 must conform to the operation’s parameters.</p></div></aside></section>
<section id="_jokers"><h2>Jokers</h2><div class="ulist"><ul><li><p>When the arguments are not known, the expression can use the operator «<code>?</code>» (joker):</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Subject::hasChanged() post:  observer^update(? : Integer, ? : Integer)</code></pre></section>
<section id="_the_oclmessage_type"><h2>The «OclMessage» Type</h2><div class="ulist"><ul><li><p>The operator «<code>^^</code>» (messages) allows an expression to access a sequence of sent messages:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Subject::hasChanged()
post: let messages : Sequence(OclMessage) =
            observer^^update(? : Integer, ? : Integer) in
      messages-&gt;notEmpty() and
      messages-&gt;exists( m | m.i &gt; 0 and m.j &gt;= m.i )</code></pre></section>
<section id="_returned_values"><h2>Returned Values</h2><div class="ulist"><ul><li><p>The operator <code>OclMessage::result()</code> allows an expression to access an operation return value (signals do not return values).</p></li><li><p>The operator <code>OclMessage::hasReturned()</code> returns true if the operation returned a value.</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person::giveSalary(amount : Integer)
    post: let message : OclMessage = company^getMoney(amount) in
    message.hasReturned()
    -- getMoney was sent and returned
    and message.result()
    -- the getMoney call returned true</code></pre>
<aside class="notes"><div class="paragraph"><p>|note: Signal messages are asynchronous by definition, they do not have a return value.
|&lt;!–  Stéréotypes des contraintes
|Plusieurs stéréotypes sont définis en standard dans UML:
|- Invariants de classe: «invariant» - Pré-conditions: «precondition» - Post-conditions: «postcondition» - Définitions de propriétés: «definition»
| Package context
|Il est possible de spécifier explicitement le nom du paquetage auquel appartient une contrainte:
|<code><code>ocl package Package::SubPackage context X inv: – some invariant
|context X::operation() pre: – some precondition endpackage </code></code></p></div></aside></section>
<section id="_constraint_inheritance"><h2>Constraint Inheritance</h2><div class="paragraph"><p><strong>Liskov substitution principle (LSP)</strong></p></div>
<div class="quoteblock"><blockquote><div class="paragraph"><p>In an object-oriented program, if S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., an object of type T may be substituted with any object of a subtype S).</p></div></blockquote></div></section>
<section id="_invariant_inheritance"><h2>Invariant Inheritance</h2><div class="ulist"><div class="title">Consequence of the LSP on the invariants:</div><ul><li><p>Subclasses always inherit invariants.</p></li><li><p>Subclasses can only reinforce an invariant.</p></li></ul></div></section>
<section id="_pre_and_post_condition_inheritance"><h2>Pre- and Post-Condition Inheritance</h2><div class="ulist"><div class="title">Consequences of the LSP on pre and postconditions:</div><ul><li><p>A precondition can only be relaxed (contrevariance)</p></li><li><p>A postcondition can only be reinforced (covariance)</p></li></ul></div></section>
<section id="_plan_7"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p>Invariants</p></li><li><p>Model Navigation</p></li><li><p>Property Definition</p></li><li><p>Operation Specification</p></li><li><p>Advanced Topics</p></li><li><p><strong>Conclusion</strong></p></li><li><p>Appendix - Language Details</p></li></ol></div></section>
<section id="_conclusion" class="impact"><h2>Conclusion</h2></section>
<section id="_ocl_goals"><h2>OCL Goals</h2><div class="ulist"><div class="title">Design by contracts allows designers to:</div><ul><li><p>be more precise.</p></li><li><p>improve documentation.</p></li><li><p>keep design independent from implementation.</p></li><li><p>Identify component’s responsibilities.</p></li></ul></div></section>
<section id="_ocl_usages"><h2>OCL Usages</h2><div class="ulist"><div class="title">OCL expressions can specify:</div><ul><li><p>Class invariants;</p></li><li><p>Class attributes initialization;</p></li><li><p>Class derived attributes;</p></li><li><p>New class properties: attributes and <em>query</em> operations;</p></li><li><p>Class operations pre- and post-conditions;</p></li><li><p>Transition guards;</p></li><li><p>Transition pre and postconditions;</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>A <em>query</em> operation is operation with no side effect.</p></div></aside></section>
<section id="_modeling_advices"><h2>Modeling Advices</h2><div class="ulist"><ul><li><p>Keep things simple: the goal of constraints is to improve the quality of a specification, and not to make it more complex.</p></li><li><p>Always combine constraints with natural language: constraints are used to make comments less ambiguous and not to replace them.</p></li><li><p>Use a tool.</p></li></ul></div>
<hr></section>
<section id="_usage"><h2>Usage</h2><div class="ulist"><ul><li><p>Code generation</p><div class="ulist"><ul><li><p>Contract generation in Eiffel, Sather, Clojure, etc.</p></li><li><p>Tool specific contract generation:</p><div class="ulist"><ul><li><p>OVal <a href="http://oval.sourceforge.net/" class="bare">http://oval.sourceforge.net/</a></p></li><li><p>Contracts for Java (Cofoja) <a href="https://github.com/nhatminhle/cofoja" class="bare">https://github.com/nhatminhle/cofoja</a></p></li><li><p>Java Modeling Language (JML)</p></li><li><p>valid4j <a href="http://www.valid4j.org" class="bare">http://www.valid4j.org</a></p></li></ul></div></li></ul></div></li><li><p>Enhanced test case generation.</p></li></ul></div></section>
<section id="_references"><h2>References</h2><div class="ulist"><ul><li><p>The Object Constraint Language -– Jos Warmer, Anneke Kleppe.</p></li><li><p>OCL home page: <a href="http://www.klasse.nl/ocl/" class="bare">http://www.klasse.nl/ocl/</a></p></li><li><p>OCL tools: <a href="http://www.um.es/giisw/ocltools" class="bare">http://www.um.es/giisw/ocltools</a></p></li><li><p>OMG Specification v2.3.1 <a href="http://www.omg.org/spec/OCL/Current/" class="bare">http://www.omg.org/spec/OCL/Current/</a></p></li><li><p>OMG UML 2.5 Working Group.</p></li></ul></div></section>
<section id="_tools"><h2>Tools</h2><div class="ulist"><ul><li><p>Eclipse OCL. <a href="https://projects.eclipse.org/projects/modeling.mdt.ocl" class="bare">https://projects.eclipse.org/projects/modeling.mdt.ocl</a></p></li><li><p>OCL Checker (Klasse Objecten)</p></li><li><p>USE OCL (Mark Richters). <a href="http://useocl.sourceforge.net/w/" class="bare">http://useocl.sourceforge.net/w/</a></p></li><li><p>Dresden OCL. <a href="http://www.dresden-ocl.org" class="bare">http://www.dresden-ocl.org</a></p></li><li><p>Octopus (Warmer &amp; Kleppe). <a href="http://octopus.sourceforge.net/" class="bare">http://octopus.sourceforge.net/</a></p></li></ul></div></section>
<section id="_plan_8"><h2>Plan</h2><div class="olist arabic"><ol class="arabic"><li><p>Introduction</p></li><li><p>Invariants</p></li><li><p>Model Navigation</p></li><li><p>Property Definition</p></li><li><p>Operation Specification</p></li><li><p>Advanced Topics</p></li><li><p>Conclusion</p></li><li><p><strong>Appendix - Language Details</strong></p></li></ol></div></section>
<section id="_appendix" class="impact"><h2>Appendix</h2><div class="paragraph"><p>Language Details</p></div></section>
<section id="_access_to_class_level_properties"><h2>Access to Class-level Properties</h2><div class="ulist"><ul><li><p>Class-level properties are accessed through double-colons.</p></li></ul></div>
<div class="paragraph"><p>Class-level attributes:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Professor inv:
    self.wage &lt; Professor::maximumWage</code></pre>
<div class="paragraph"><p>Class-level query operations:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Professor inv:
    self.age() &gt; Student::minimumAge()</code></pre></section>
<section id="_access_to_enumeration_literals_and_nested_states"><h2>Access to Enumeration Literals and Nested States</h2><div class="ulist"><ul><li><p>To avoid name conflicts, enumeration literals are preceded by the enumeration name and double-colons:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Professor
inv: self.title = Title::full implies self.wage &gt; 10+`</code></pre>
<div class="ulist"><ul><li><p>Nested states (from the attached state machine) are preceded by the container state name and double-colons:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department::add(p:Professor)
pre:p.oclInState(Unavailable::Holydays)
-- nested states</code></pre></section>
<section id="_basic_types"><h2>Basic Types</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Type</th><th class="tableblock halign-left valign-top">Values</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>OclInvalid</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">invalid</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>OclVoid</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">null, invalid</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">true, false</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1, -5, 2, 34, 26524, etc.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Real</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1.5, 3.14, etc.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">``To be or not to be…''</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>UnlimitedNatural</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">0, 1, 2, 42, … , *</p></td></tr></table></section>
<section id="_collection_types_12"><h2>Collection Types (1/2)</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:25%"><col style="width:25%"><col style="width:25%"><col style="width:25%"></colgroup><thead><tr><th class="tableblock halign-left valign-top"><code>Type</code></th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Obtained from</th><th class="tableblock halign-left valign-top">Examples</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Set</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">unordered set.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Simple navigation</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">{1, 2, 45, 4}</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>OrderedSet</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ordered set.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Navigation through an ordered association end (labelled with <code>{ordered}</code>)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">{1, 2, 4, 45}</p></td></tr></table></section>
<section id="_collection_types_22"><h2>Collection Types (2/2)</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:25%"><col style="width:25%"><col style="width:25%"><col style="width:25%"></colgroup><thead><tr><th class="tableblock halign-left valign-top"><code>Type</code></th><th class="tableblock halign-left valign-top">Description</th><th class="tableblock halign-left valign-top">Obtained from</th><th class="tableblock halign-left valign-top">Examples</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bag</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">unordered multiset.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Combined navigations</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">{1, 3, 4, 3}</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sequence</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ordered multiset.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Navigation though a ordered association end <code>{ordered}</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">{1, 3, 3, 5, 7},  {1..10}</p></td></tr></table></section>
<section id="_type_conformity_rules"><h2>Type Conformity Rules</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:33.3333%"><col style="width:33.3333%"><col style="width:33.3334%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Type</th><th class="tableblock halign-left valign-top">Conforms to</th><th class="tableblock halign-left valign-top">Condition</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Set(T1)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Collection(T2)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">If T1 conforms to T2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Sequence(T1)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Collection(T2)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">If T1 conforms to T2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bag(T1)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Collection(T2)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">If T1 conforms to T2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">OrderedSet(T1)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Collection(T2)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">If T1 conforms to T2</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Real</p></td><td class="tableblock halign-left valign-top"></td></tr></table></section>
<section id="_operations_on_basic_types"><h2>Operations on Basic Types</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Type</th><th class="tableblock halign-left valign-top">Operations</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">=, *, +, -, /, abs(), div(), mod(),max(), min()</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Real</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">=, *, +, -, /, abs(), floor(), round(),max(), min(), &gt;, &lt;, &#8656;, &gt;=, …</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">=, size(), concat(), substring(), toInteger(), toReal(), toUpper(), toLower()</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">or, xor, and, not, implies</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>UnlimitedNatural</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">*,+,/</p></td></tr></table></section>
<section id="_operations_on_collections"><h2>Operations on Collections</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operations</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>isEmpty()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">True if the collection is empty.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>notEmpty()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Trues if the collection contains at least one element.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>size()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Number of elements in the collection.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>count(&lt;elem&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Number of occurrences of <code>&lt;elem&gt;</code> in the collection.</p></td></tr></table>
<div class="paragraph"><p>Examples:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">{}-&gt;isEmpty()
{1}-&gt;notEmpty()
{1,2,3,4,5}-&gt;size() = 5
{1,2,3,4,5}-&gt;count(2) = 1</code></pre>
<hr></section>
<section id="_complex_operations_on_collections"><h2>Complex Operations on Collections</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>select()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Selects (filters) a subset of the collection.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>reject()</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>collect()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Evaluates an expression for each element in the collection.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectNested()</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>forAll()</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>exists()</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>closure()</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>iterate()</code></p></td><td class="tableblock halign-left valign-top"></td></tr></table></section>
<section id="_complex_operations_on_collections_2"><h2>Complex Operations on Collections</h2><div class="paragraph"><p>Complex operations use an iterator (named <code>each</code> by convention), a variable that evaluates to each collection element.</p></div>
<table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>select(&lt;boolean-expression&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Selects (filters) a subset of the collection.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>collect(&lt;expression&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Evaluates an expression for each element in the collection.</p></td></tr></table>
<div class="paragraph"><p>Examples:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">{1,2,3,4,5}-&gt;select(each | each &gt; 3) = {4,5}
{'a','bb','ccc','dd'}-&gt;collect(each | each.toUpper()) = {'A','BB','CCC','DD'}</code></pre>
<hr></section>
<section id="_select_and_reject_syntax"><h2>Select and Reject: Syntax</h2><div class="paragraph"><p>Selects (respectively rejects) the collection subset to which a boolean expression evaluates to true.</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Collection(T)-&gt;select(elem:T | &lt;bool-expr&gt;) : Collection(T)</code></pre>
<div class="ulist"><ul><li><p>The element types of the input and the output collections are always the same.</p></li><li><p>The size of the output collection is less than or equal to the size of the input collection.</p></li></ul></div></section>
<section id="_select_and_reject_examples"><h2>Select and Reject: Examples</h2><div class="ulist"><ul><li><p>Possible syntaxes:</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department inv:
    -- no iterator
    self.instructors-&gt;select(age &gt; 50)-&gt;notEmpty()
    self.instructors-&gt;reject(age &gt; 23)-&gt;isEmpty()

    -- with iterator
    self.instructors-&gt;select(each | each.age &gt; 50)-&gt;notEmpty()

    -- with typed iterator
    self.instructors-&gt;select(each : Professor | each.age &gt; 50)-&gt;notEmpty()</code></pre></section>
<section id="_collect_syntax"><h2>Collect: Syntax</h2><div class="paragraph"><p>Evaluates an expression on each collection element and returns another collection containing the results.</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Collection&lt;T1&gt;-&gt;collect(&lt;expr&gt;) : Bag&lt;T2&gt;</code></pre>
<div class="ulist"><ul><li><p>The sizes of the input and the output collection are mandatory the same.</p></li><li><p>The result is a multiset (<code>Bag</code>).</p></li><li><p>If the the result of <code>&lt;expr&gt;</code> is a collection, the result will not be a collection of collections. The result is automatically flattened.</p></li></ul></div></section>
<section id="_collect_examples"><h2>Collect: Examples</h2><div class="paragraph"><p>Possible syntaxes:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department:
    self.instructors-&gt;collect(name)
    self.instructors-&gt;collect(each | each.name)
    self.instructors-&gt;collect(each: Professor | each.name)

    -- Bag to Set conversion:
    self.instructors-&gt;collect(name)-&gt;asSet()

    -- shortcut:
    self.instructors.name</code></pre></section>
<section id="_property_verification_on_collections"><h2>Property Verification on Collections</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>forAll(&lt;boolean-expression&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Verifies that <strong>all</strong> the collection elements respect the expression.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>exists(&lt;boolean-expression&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Verifies that <strong>at least</strong> the collection elements respect the expression.</p></td></tr></table>
<div class="paragraph"><p>Examples:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">{1,2,3,4,5}-&gt;forAll(each | each &gt; 0 and each &lt; 10)
{1,2,3,4,5}-&gt;exists(each | each = 3)</code></pre></section>
<section id="_for_all_syntax"><h2>For All: Syntax</h2><div class="paragraph"><p>Evaluates a Boolean expression on all elements of a collection and returns true if all evaluations return true.</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Collection(T)-&gt;forAll(elem:T | &lt;bool-expr&gt;) : Boolean</code></pre></section>
<section id="_for_all_examples"><h2>For All: Examples</h2><pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department
inv:
    -- All instructors are associate professors.
    self.instructors-&gt;forAll(title = Title::associate)

    self.instructors-&gt;forAll(each | each.titre = Title::associate)

    self.instructors-&gt;forAll(each: Professor | each.title = Title::associate)</code></pre></section>
<section id="_for_all"><h2>For All</h2><div class="paragraph"><p>Cartesian product:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department inv:
    self.instructors-&gt;forAll(e1, e2 : Professor |
        e1 &lt;&gt; e2 implies e1.name &lt;&gt; e2.name)

-- equivalent to:
    self.instructors-&gt;forAll(e1 | self.instructors-&gt;
        forAll(e2 | e1 &lt;&gt; e2 implies e1.name &lt;&gt; e2.name))</code></pre></section>
<section id="_exists"><h2>Exists</h2><div class="paragraph"><p>Returns true if a boolean expression is true for at least one collection element.</p></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">collection-&gt;exists(&lt;boolean-expression&gt;) : Boolean</code></pre>
<div class="paragraph"><p>Example:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context: Department inv:
    self.instructors-&gt;exists(each: Professor |
        each.name = "Martin")</code></pre></section>
<section id="_advanced_operations_on_collections"><h2>Advanced Operations on Collections</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:30%"><col style="width:70%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top"> Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectNested(&lt;exp&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Similar to <code>collect()</code>, but does not flatten the result if it is a collections of collections.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>closure()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Recursively evaluates and expression.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>iterate()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Generic operation that applies to any collection.</p></td></tr></table>
<hr></section>
<section id="_collect_nested"><h2>Collect Nested</h2><div class="paragraph"><p>Similar to <code>collect()</code>, without flattening collections of collections.</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University
    -- All university instructors, grouped by department:
    self.department-&gt;collectNested(instructors)</code></pre>
<div class="paragraph"><p>Collections of collections can be flattened with the <code>flatten()</code> operation:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">    Set{Set{1, 2}, Set{3, 4}} -&gt;flatten() = Set{1, 2, 3, 4}</code></pre></section>
<section id="_closures"><h2>Closures</h2><div class="ulist"><ul><li><p>The <code>closure()</code> operation recursively invokes an OCL expression over a <em>source</em> and adds the successive results to the <em>source</em>.</p></li><li><p>The iteration finishes when the expression evaluation returns an empty set.</p></li></ul></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">source-&gt;closure(v : &lt;class-name&gt; | &lt;expression-with-v&gt;)</code></pre>
<div class="paragraph"><p>Example:</p></div>
<div class="openblock columns"><div class="content"><pre class="highlight listingblock col-6"><code data-noescape class="ocl language-ocl">context Person
def descendants() : Set(Person) =
self.children-&gt;closure(children)</code></pre>
<div class="imageblock col-6" style="text-align: center"><img src="resources/svg/family.svg" alt="family" width="600px"></div></div></div></section>
<section id="_iterate"><h2>Iterate</h2><div class="paragraph"><p>Generic operation on collections.</p></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">Collection(&lt;T&gt;)-&gt;iterate(&lt;elm&gt;: &lt;T&gt;; answer: T = &lt;value&gt; |
    &lt;expr-with-elm-and-response&gt;)</code></pre>
<div class="paragraph"><p>Examples:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Department inv:
    self.instructors-&gt;select(age &gt; 50)-&gt;notEmpty()

    -- equivalent expression:
    self.instructors-&gt;iterate(each: Professor;
        answer: Set(Professor) = Set {} |
            if each.age &gt; 50 then answer.including(each)
            else answer endif) -&gt; notEmpty()</code></pre></section>
<section id="_other_operations_on_collections"><h2>Other operations on Collections</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:30%"><col style="width:70%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>includes(&lt;elem&gt;)</code>, <code>excludes(&lt;elem&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Checks if <code>&lt;elem&gt;</code> belongs (<em>resp</em>. not belongs) to the collection.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>includesAll(&lt;coll&gt;)</code>, <code>excludesAll(&lt;coll&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Checks if all elements of <code>&lt;coll&gt;</code> belong (<em>resp</em>. not belong) to the collection.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>union(&lt;coll&gt;)</code>, <code>intersection(&lt;coll&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Set operations.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>asSet()</code>, <code>asBag()</code>, <code>asSequence()</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Type conversion.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>including(&lt;elem&gt;)</code>, <code>excluding(&lt;elem&gt;)</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Creates a new collection that includes (<em>resp</em>. excludes) <code>&lt;elem&gt;</code></p></td></tr></table></section>
<section id="_predefined_properties_12"><h2>Predefined Properties (1/2)</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:70%"><col style="width:30%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclIsTypeOf(t : OclType):Boolean</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclIsKindOf(t : OclType):Boolean</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclInState(s : OclState):Boolean</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclIsNew():Boolean</code></p></td><td class="tableblock halign-left valign-top"></td></tr></table></section>
<section id="_predefined_properties_12_2"><h2>Predefined Properties (1/2)</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:70%"><col style="width:30%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Operation</th><th class="tableblock halign-left valign-top">Behavior</th></tr><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclIsUndefined():Boolean</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclIsInvalid():Boolean</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>oclAsType(t : Type):Type</code></p></td><td class="tableblock halign-left valign-top"></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>allInstances():Set(T)</code></p></td><td class="tableblock halign-left valign-top"></td></tr></table>
<div class="paragraph"><p>Examples:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context University
    inv: self.oclIsTypeOf(University)
    inv: not self.oclIsTypeOf(Department)</code></pre></section>
<section id="_let"><h2><code>Let</code></h2><div class="paragraph"><p>When an OCL sub-expression appears several times on a constraint, it is possible to use an <strong>alias</strong> to replace if:</p></div>
<div class="paragraph"><p>Syntax:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">let &lt;alias&gt; : &lt;Type&gt; = &lt;ocl-expression&gt; in &lt;expression-with-alias&gt;</code></pre>
<div class="paragraph"><p>Example:</p></div>
<pre class="highlight listingblock"><code data-noescape class="ocl language-ocl">context Person inv:
    let income : Integer = self.job.salary-&gt;sum() in
    if isUnemployed then
        income &lt; 100
    else
        income &gt;= 100
    endif</code></pre>
<div class="ulist"><ul><li><p>Note that this is only an alias, not an assignment.</p></li></ul></div></section>
<section id="_thank_you_for_your_attention" class="impact"><h2>Thank you for your attention!</h2></section>
<section id="_license_2"><div class="paragraph"><p><strong>Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</strong></p></div>
<div class="ulist center"><div class="title">You are free to:</div><ul><li><p><strong>Share</strong> — copy and redistribute the material in any medium or format</p></li><li><p><strong>Adapt</strong> — remix, transform, and build upon the material for any purpose, even commercially.</p></li></ul></div>
<div class="paragraph"><p>The licensor cannot revoke these freedoms as long as you follow the license terms.</p></div>
<div class="ulist center"><div class="title">Under the following terms:</div><ul><li><p><strong>Attribution</strong> — You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</p></li><li><p><strong>NonCommercial</strong> — You may not use the material for commercial purposes.</p></li><li><p><strong>ShareAlike</strong> — If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</p></li></ul></div>
<div class="paragraph"><p><strong>No additional restrictions</strong> — You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.</p></div></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
})

// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: 'c/t',
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: false,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'none',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'flex',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 1920,
  height: 1080,

  // Factor of the display size that should remain empty around the content
  margin: 0,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
      { src: 'reveal.js/plugin/notes/notes.js', async: true },
      
      
      
      
  ],

  

});</script></body></html>